---
alwaysApply: false
---
# Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (TDD –ø–æ–¥—Ö–æ–¥)

## –¶–∏–∫–ª —Ä–∞–±–æ—Ç—ã –ø–æ –∏—Ç–µ—Ä–∞—Ü–∏–∏

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –∏–∑ @tasklist.md {input0}
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ò–∑—É—á–∏—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ @vision.md

### 2. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
**–î–û –Ω–∞—á–∞–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑–∞—Ç—å **–∫–ª—é—á–µ–≤—ã–µ –æ—Ç—Ä–µ–∑–∫–∏ –∫–æ–¥–∞** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- –£–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–ª–∞—Å—Å–æ–≤/—Ñ—É–Ω–∫—Ü–∏–π
- **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ—Å—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –Ω–∞–ø–∏—Å–∞–Ω—ã –≤ TDD —Ü–∏–∫–ª–µ
- –î–æ–∂–¥–∞—Ç—å—Å—è **—è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è**

### 3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ TDD

#### TDD —Ü–∏–∫–ª: Red ‚Üí Green ‚Üí Refactor

**–î–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**

##### üî¥ RED - –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≤–∞–ª–∏–≤–∞—é—â–∏–π—Å—è —Ç–µ—Å—Ç
1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç** –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   - –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `make test` - —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω **–ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è** (RED)
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ

**–ü—Ä–∞–≤–∏–ª–∞ RED —Ñ–∞–∑—ã:**
- –¢–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–∞–ª–∏–≤–∞—Ç—å—Å—è –∏–º–µ–Ω–Ω–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è - –∑–Ω–∞—á–∏—Ç –æ–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —É–∂–µ –µ—Å—Ç—å
- –û–¥–∏–Ω —Ç–µ—Å—Ç = –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –¢–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º

##### üü¢ GREEN - –ù–∞–ø–∏—Å–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥
2. **–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç–∞–≤–∏—Ç —Ç–µ—Å—Ç –ø—Ä–æ–π—Ç–∏
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–º–∏–Ω–∏–º—É–º** –∫–æ–¥–∞ –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
   - –ù–µ –¥—É–º–∞—Ç—å –æ –∫—Ä–∞—Å–æ—Ç–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `make test` - —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω **–ø—Ä–æ–π—Ç–∏** (GREEN)
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã —Ç–æ–∂–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

**–ü—Ä–∞–≤–∏–ª–∞ GREEN —Ñ–∞–∑—ã:**
- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º, –Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º
- –î–æ–ø—É—Å—Ç–∏–º—ã "–∫–æ—Å—Ç—ã–ª–∏" –∏ hardcode, –µ—Å–ª–∏ –æ–Ω–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ—Å—Ç
- –ì–ª–∞–≤–Ω–æ–µ - —Ç–µ—Å—Ç –∑–µ–ª–µ–Ω—ã–π, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ç–æ–º
- –°–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º @conventions.mdc (type hints, async/await, 1 –∫–ª–∞—Å—Å = 1 —Ñ–∞–π–ª)

##### üîµ REFACTOR - –£–ª—É—á—à–∏—Ç—å –∫–æ–¥
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** –∫–æ–¥–∞
   - –£–ª—É—á—à–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø **KISS**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `make test` - —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è **–∑–µ–ª–µ–Ω—ã–º–∏**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `make quality` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

**–ü—Ä–∞–≤–∏–ª–∞ REFACTOR —Ñ–∞–∑—ã:**
- –ò–∑–º–µ–Ω—è—Ç—å –∫–æ–¥, **–Ω–µ –º–µ–Ω—è—è** –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è - –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã
- –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä–∞—Å–Ω–µ–ª–∏ - –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
- –°–ª–µ–¥–æ–≤–∞—Ç—å –≤—Å–µ–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –∏–∑ @conventions.mdc

#### –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ —Ü–∏–∫–ª–∞
4. **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ü–∏–∫–ª** –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥—É 1 (RED)
   - –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏

#### –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
5. **–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö TDD —Ü–∏–∫–ª–æ–≤:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `make quality` - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `make test-cov` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ (–º–∏–Ω–∏–º—É–º 70%)
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TDD —Ü–∏–∫–ª–æ–≤:**
- **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ)
- **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä:** `make quality` (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ª–∏–Ω—Ç–∏–Ω–≥, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤)
- **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:** `make test-cov`
- **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ:** –º–∏–Ω–∏–º—É–º 70% –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–¢–µ—Å—Ç" –∏—Ç–µ—Ä–∞—Ü–∏–∏
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- **–î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** –æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### 5. –§–∏–∫—Å–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ @tasklist.md (‚úÖ)
- –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### 6. –ö–æ–º–º–∏—Ç
- –°–¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- –§–æ—Ä–º–∞—Ç: `feat: <–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏>`

### 7. –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- **–ù–ï –Ω–∞—á–∏–Ω–∞—Ç—å** –Ω–æ–≤—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ
**–í—Å–µ –∫–æ–º–∞–Ω–¥—ã, —Ç–µ—Å—Ç—ã –∏ –∑–∞–ø—É—Å–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¢–û–õ–¨–ö–û –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.**

### –†–∞–±–æ—Ç–∞ —Å uv

#### –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
uv venv
```

#### –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# macOS/Linux
source .venv/bin/activate

# Windows
.venv\Scripts\activate
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
uv pip install -e .
```

#### –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥
```bash
# –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
uv run python -m src.main

# TDD —Ü–∏–∫–ª (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ)
make test        # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (RED/GREEN —Ñ–∞–∑—ã)
make quality     # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ª–∏–Ω—Ç–∏–Ω–≥, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (REFACTOR —Ñ–∞–∑–∞)
make test-cov    # –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
```

### –ü—Ä–∞–≤–∏–ª–∞
- ‚úÖ –í—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π `uv run` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `uv pip install`
- ‚ùå –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –ø–∞–∫–µ—Ç—ã –≥–ª–æ–±–∞–ª—å–Ω–æ
- ‚ùå –ù–ï –∑–∞–ø—É—Å–∫–∞–π –∫–æ–º–∞–Ω–¥—ã –≤–Ω–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## TDD Best Practices

### –ü—Ä–∏–Ω—Ü–∏–ø—ã TDD
1. **–ü–∏—à–∏ —Ç–µ—Å—Ç –ø–µ—Ä–≤—ã–º** - –≤—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π —Å —Ç–µ—Å—Ç–∞
2. **–ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞** - –ø–∏—à–∏ —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª
3. **–ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –∑–∞–ø—É—Å–∫–∞–π —Ç–µ—Å—Ç—ã —á–∞—Å—Ç–æ
4. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥ –∑–µ–ª–µ–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏** - —É–ª—É—á—à–∞–π –∫–æ–¥ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
5. **–û–¥–∏–Ω —Ç–µ—Å—Ç –∑–∞ —Ä–∞–∑** - —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –†–∞–∑–º–µ—Ä —à–∞–≥–æ–≤
- **–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏** - –ª—É—á—à–µ 10 –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ü–∏–∫–ª–æ–≤, —á–µ–º 1 –±–æ–ª—å—à–æ–π
- **–û–¥–∏–Ω assert –Ω–∞ —Ç–µ—Å—Ç** - –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–¥–Ω—É –≤–µ—â—å
- **–ö–æ–º–º–∏—Ç –Ω–∞ –∫–∞–∂–¥–æ–º GREEN** - —Ñ–∏–∫—Å–∏—Ä—É–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TDD
‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TDD –¥–ª—è:**
- –ù–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ (—Å–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–π –±–∞–≥)
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

‚ùå **–ú–æ–∂–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TDD –¥–ª—è:**
- Trivial code (getters/setters)
- UI/–≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –ü—Ä–∞–≤–∏–ª–∞

‚úÖ **–î–µ–ª–∞—Ç—å:**
- –†–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–æ–≥–æ –ø–æ TDD —Ü–∏–∫–ª—É (RED ‚Üí GREEN ‚Üí REFACTOR)
- –°–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç—ã –ü–ï–†–ï–î —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –ó–∞–ø—É—Å–∫–∞—Ç—å `make test` –ø–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ TDD —Ü–∏–∫–ª–µ
- –ó–∞–ø—É—Å–∫–∞—Ç—å `make quality` –≤ REFACTOR —Ñ–∞–∑–µ
- –ó–∞–ø—É—Å–∫–∞—Ç—å `make test-cov` –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö TDD —Ü–∏–∫–ª–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –º–∏–Ω–∏–º—É–º 70%
- –ñ–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ü–û–°–õ–ï —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–ª—è—Ç—å @tasklist.md
- –î–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç—ã

‚ùå **–ù–ï –¥–µ–ª–∞—Ç—å:**
- –ü–∏—Å–∞—Ç—å –∫–æ–¥ –±–µ–∑ —Ç–µ—Å—Ç–∞ (–Ω–∞—Ä—É—à–µ–Ω–∏–µ TDD)
- –ü–∏—Å–∞—Ç—å –∫–æ–¥ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Ç–µ—Å—Ç —Å—Ç–∞–ª RED
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –Ω–∞ RED —Ñ–∞–∑–µ
- –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å REFACTOR —Ñ–∞–∑—É
- –ù–∞—á–∏–Ω–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–µ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –î–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –∑–∞ —Ä–∞–∑
- –û—Ç–∫–ª–æ–Ω—è—Ç—å—Å—è –æ—Ç @vision.md
- –£—Å–ª–æ–∂–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏—è (–∞–Ω—Ç–∏-KISS)

---

## –®–∞–±–ª–æ–Ω —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

```
### –ò—Ç–µ—Ä–∞—Ü–∏—è X: [–ù–∞–∑–≤–∞–Ω–∏–µ]

**–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ TDD:**

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å 1: [–ù–∞–∑–≤–∞–Ω–∏–µ]

**üî¥ RED - –¢–µ—Å—Ç:**
```python
# tests/test_example.py
def test_example_functionality():
    # Arrange
    ...
    # Act
    ...
    # Assert
    assert ...
```

**üü¢ GREEN - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥:**
```python
# src/example.py
class Example:
    def method(self):
        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
        ...
```

**üîµ REFACTOR - –£–ª—É—á—à–µ–Ω–∏—è:**
- –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–ª—É—á—à–∏—Ç—å –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å KISS –ø—Ä–∏–Ω—Ü–∏–ø

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å 2: [–ù–∞–∑–≤–∞–Ω–∏–µ]

**üî¥ RED - –¢–µ—Å—Ç:**
...

**–ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ TDD?**
```

---

## –®–∞–±–ª–æ–Ω TDD —Ü–∏–∫–ª–∞

```
### TDD –¶–∏–∫–ª –¥–ª—è [—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å]

#### üî¥ RED
‚úÖ –¢–µ—Å—Ç –Ω–∞–ø–∏—Å–∞–Ω: tests/test_example.py::test_feature
‚úÖ –¢–µ—Å—Ç –∑–∞–ø—É—â–µ–Ω: `make test`
‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è (–æ–∂–∏–¥–∞–µ–º–æ): ImportError / AttributeError / ...

#### üü¢ GREEN
‚úÖ –ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω: src/example.py
‚úÖ –¢–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã: `make test`
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

#### üîµ REFACTOR
‚úÖ –ö–æ–¥ —É–ª—É—á—à–µ–Ω: [–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π]
‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ: `make quality`
‚úÖ –¢–µ—Å—Ç—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–æ—Ö–æ–¥—è—Ç: `make test`

---
```

---

## –®–∞–±–ª–æ–Ω –∫–æ–º–º–∏—Ç–∞

```bash
feat: implement iteration X - [–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]

TDD cycle:
- üî¥ RED: [—Ç–µ—Å—Ç 1], [—Ç–µ—Å—Ç 2], ...
- üü¢ GREEN: [—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏]
- üîµ REFACTOR: [—É–ª—É—á—à–µ–Ω–∏—è –∫–æ–¥–∞]

Coverage: X%
Tested: [–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞]
```

---

## –ü—Ä–∏–º–µ—Ä TDD —Ü–∏–∫–ª–∞

### –ó–∞–¥–∞—á–∞: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –≤ ConversationManager

#### üî¥ RED - –ü–∏—à–µ–º —Ç–µ—Å—Ç
```python
# tests/test_conversation.py
def test_clear_history():
    manager = ConversationManager()
    key = ConversationKey(chat_id=1, user_id=1)
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
    manager.add_message(key, "user", "Hello")
    manager.add_message(key, "assistant", "Hi")
    
    # –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
    manager.clear_history(key)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞
    history = manager.get_history(key, "system prompt")
    assert len(history) == 1  # —Ç–æ–ª—å–∫–æ system prompt
```

–ó–∞–ø—É—Å–∫–∞–µ–º: `make test`
–†–µ–∑—É–ª—å—Ç–∞—Ç: **FAIL** - AttributeError: 'ConversationManager' object has no attribute 'clear_history'

‚úÖ **RED —Ñ–∞–∑–∞ –ø—Ä–æ–π–¥–µ–Ω–∞** - —Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å

#### üü¢ GREEN - –ü–∏—à–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥
```python
# src/conversation.py
class ConversationManager:
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã ...
    
    def clear_history(self, key: ConversationKey) -> None:
        """–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞."""
        if key in self.conversations:
            self.conversations[key] = []
```

–ó–∞–ø—É—Å–∫–∞–µ–º: `make test`
–†–µ–∑—É–ª—å—Ç–∞—Ç: **PASS** - –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

‚úÖ **GREEN —Ñ–∞–∑–∞ –ø—Ä–æ–π–¥–µ–Ω–∞** - —Ç–µ—Å—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç

#### üîµ REFACTOR - –£–ª—É—á—à–∞–µ–º –∫–æ–¥
```python
# src/conversation.py
class ConversationManager:
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã ...
    
    def clear_history(self, key: ConversationKey) -> None:
        """–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —á–∞—Ç–∞."""
        self.conversations.pop(key, None)  # –ë–æ–ª–µ–µ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω–æ
```

–ó–∞–ø—É—Å–∫–∞–µ–º: `make test` - ‚úÖ PASS
–ó–∞–ø—É—Å–∫–∞–µ–º: `make quality` - ‚úÖ PASS

‚úÖ **REFACTOR —Ñ–∞–∑–∞ –ø—Ä–æ–π–¥–µ–Ω–∞** - –∫–æ–¥ —É–ª—É—á—à–µ–Ω, —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

---

**–ò—Ç–æ–≥:** –û–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω—ã–π TDD —Ü–∏–∫–ª üéâ
